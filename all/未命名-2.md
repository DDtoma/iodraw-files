```mermaid
classDiagram
    %% 接口定义
    class IComponent {
        <<interface>>
        +initialize(): boolean
        +shutdown(): void
        +getStatus(): ComponentStatus
        +execute(operation: string, params: any): Promise~Result~
    }
    
    %% 回调接口
    class Callback {
        <<interface>>
        +call(data: any): void
    }
    
    %% Agent元信息类
    class AgentMeta {
        -agentId: string
        -name: string
        -description: string
        -config: Map~string, any~
        +constructor(agentId: string, name: string, description: string)
        +getAgentId(): string
        +getName(): string
        +getDescription(): string
        +getConfig(): Map~string, any~
        +setConfig(key: string, value: any): void
        +getAllConfig(): object
    }
    
    %% 内部会话类
    class Session {
        -stepCounter: number
        -state: SessionState
        -context: Map~string, any~
        -history: ExecutionHistory[]
        +constructor()
        +incrementStepCounter(): number
        +getStepCount(): number
        +resetStepCounter(): void
        +getState(): SessionState
        +setState(state: SessionState): void
        +updateContext(key: string, value: any): void
        +getContext(key: string): any
        +addHistoryEntry(entry: ExecutionHistory): void
        +getHistory(): ExecutionHistory[]
    }
    
    %% 核心类
    class BaseAgent {
        -agentInstanceId: string
        -agentMeta: AgentMeta
        -components: Map~string, IComponent~
        -agentState: AgentState
        -context: Map~string, any~
        +constructor(agentInstanceId: string, agentMeta: AgentMeta)
        +getAgentInstanceId(): string
        +getAgentMeta(): AgentMeta
        +getAgentId(): string
        +getName(): string
        +initialize(): boolean
        +observe(): Promise~ObservationResult~
        +orient(): Promise~OrientationResult~
        +decide(): Promise~DecisionResult~
        +act(): Promise~ActionResult~
        +registerComponent(id: string, component: IComponent): boolean
        +getComponent(id: string): IComponent
        #handleError(phase: string, error: Error): ErrorHandlingResult
        #updateContext(key: string, value: any): void
        #getContext(key: string): any
    }
    
    class AgentExecutor {
        -agent: BaseAgent
        -executionState: ExecutionState
        -runConfig: RunConfig
        -callbacks: Callback[]
        +constructor(agent: BaseAgent, runConfig: RunConfig)
        +getAgent(): BaseAgent
        +getAgentInstanceId(): string
        +initialize(): boolean
        +execute(input: any): Promise~ExecutionResult~
        +executeStep(): Promise~StepResult~
        +interrupt(): boolean
        +resume(): boolean
        +reset(): boolean
        +registerCallback(callback: Callback): string
        +unregisterCallback(id: string): boolean
        -handleAgentError(error: Error): ErrorHandlingResult
        -shouldContinue(): boolean
    }
    
    class AgentRunner {
        -executor: AgentExecutor
        -session: Session
        -globalConfig: GlobalConfig
        +constructor(config: GlobalConfig)
        +initialize(): boolean
        +executeAgent(input: any): Promise~ExecutionResult~
        +getSessionStepCount(): number
        +resetSessionStepCounter(): void
        +createAgent(agentMeta: AgentMeta): BaseAgent
        +createExecutor(agent: BaseAgent, runConfig: RunConfig): AgentExecutor
        +getAgentInstanceId(): string
        -handleSessionEvent(event: SessionEvent): void
        -getContextData(key: string): any
        -updateContextData(key: string, value: any): void
    }
    
    %% 结果类
    class Result {
        +success: boolean
        +data: any
        +error: Error
        +metrics: Map~string, number~
    }
    
    %% 枚举和类型
    class AgentState {
        <<enumeration>>
        INITIALIZING
        READY
        RUNNING
        PAUSED
        ERROR
        SHUTDOWN
    }
    
    class ComponentStatus {
        <<enumeration>>
        UNINITIALIZED
        ACTIVE
        INACTIVE
        ERROR
    }
    
    class ExecutionState {
        <<enumeration>>
        IDLE
        RUNNING
        INTERRUPTED
        COMPLETED
        FAILED
    }
    
    class SessionState {
        <<enumeration>>
        NEW
        ACTIVE
        PAUSED
        COMPLETED
        FAILED
    }
    
    %% 关系定义
    AgentMeta --> BaseAgent : instantiates
    AgentRunner *-- Session : contains
    AgentRunner --> AgentExecutor : creates
    AgentRunner --> BaseAgent : creates
    AgentExecutor --> BaseAgent : controls
    BaseAgent --> IComponent : uses
    BaseAgent --> AgentState : has
    BaseAgent o-- AgentMeta : references
    AgentExecutor --> ExecutionState : maintains
    Session --> SessionState : has
```