```mermaid
graph TB
    %% 总标题
    title[<b>基于共享数据源的Agent协作架构</b>]
    
    %% Agent实例
    subgraph Agents["Agent实例"]
        Agent1["Agent 1"]
        Agent2["Agent 2"]
        Agent3["Agent 3"]
    end
    
    %% 共享数据层
    subgraph SharedDataLayer["共享数据层"]
        DataStore["共享数据存储<br>Shared Data Store"]
        AccessControl["访问控制<br>Access Control"]
        ChangeNotifier["变更通知器<br>Change Notifier"]
    end
    
    %% 协作层
    subgraph CollaborationLayer["协作层"]
        Coordinator["协作协调器<br>Collaboration Coordinator"]
        RoleManager["角色管理器<br>Role Manager"]
        TeamFormation["团队形成器<br>Team Formation"]
        StateSync["状态同步器<br>State Synchronizer"]
    end
    
    %% 服务发现
    subgraph DiscoveryService["服务发现"]
        Registry["Agent注册表<br>Agent Registry"]
        CapabilityIndex["能力索引<br>Capability Index"]
        HealthMonitor["健康监控<br>Health Monitor"]
    end
    
    %% 协作模型
    subgraph CollaborationModels["协作模型"]
        DataCentric["数据中心协作<br>Data-Centric"]
        EventBased["事件驱动协作<br>Event-Based"]
        HybridCol["混合协作<br>Hybrid"]
    end
    
    %% 关系连接
    Agent1 -->|"读写数据"| DataStore
    Agent2 -->|"读写数据"| DataStore
    Agent3 -->|"读写数据"| DataStore
    
    AccessControl -->|"控制访问"| DataStore
    ChangeNotifier -->|"监听变更"| DataStore
    ChangeNotifier -.->|"通知变更"| Agents
    
    Agents --> Registry: 注册能力
    Registry --> CapabilityIndex: 索引能力
    CapabilityIndex --> Coordinator: 查询能力
    
    CollaborationModels --> CollaborationLayer: 实现
    
    Coordinator --> RoleManager: 分配角色
    Coordinator --> TeamFormation: 组建团队
    Coordinator --> StateSync: 同步状态
    
    CollaborationLayer -->|"使用"| SharedDataLayer
    
    %% 样式设置
    classDef titleClass fill:#f9f9f9,stroke:#333,stroke-width:2px,font-weight:bold
    classDef agentClass fill:#e3f2fd,stroke:#1565c0,stroke-width:1px
    classDef dataClass fill:#e8f5e9,stroke:#2e7d32,stroke-width:1px
    classDef collabClass fill:#fff3e0,stroke:#e65100,stroke-width:1px
    classDef discoveryClass fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    classDef modelClass fill:#e1f5fe,stroke:#0288d1,stroke-width:1px
    
    class title titleClass
    class Agent1,Agent2,Agent3 agentClass
    class DataStore,AccessControl,ChangeNotifier dataClass
    class Coordinator,RoleManager,TeamFormation,StateSync collabClass
    class Registry,CapabilityIndex,HealthMonitor discoveryClass
    class DataCentric,EventBased,HybridCol modelClass
```