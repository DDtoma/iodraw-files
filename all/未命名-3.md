```mermaid
graph TB
    %% 总标题
    title[<b>代理与组件交互模型</b>]
    
    %% 核心类
    AgentMeta["AgentMeta<br>(代理元信息)"]
    AgentRunner["AgentRunner"]
    Session["Session<br>(内部组件)"]
    AgentExecutor["AgentExecutor"]
    BaseAgent["BaseAgent<br>(实例ID)"]
    
    %% 功能组件
    Perception["感知处理组件"]
    Cognition["认知理解组件"]
    Decision["决策执行组件"]
    Memory["记忆系统<br>MemoryManager"]
    Reasoning["推理引擎组件"]
    Tool["工具与资源组件"]
    
    %% 交互关系
    AgentMeta --> BaseAgent
    AgentRunner o-- Session
    AgentRunner --> AgentExecutor: 创建和控制
    AgentExecutor --> BaseAgent: 执行控制
    BaseAgent --> Perception: 观察阶段调用
    BaseAgent --> Cognition: 定向阶段调用
    BaseAgent --> Decision: 决策阶段调用
    BaseAgent --> Tool: 行动阶段调用
    Session --> Memory: 转发记忆操作
    BaseAgent --> Session: 记忆读写
    BaseAgent -.-> Memory: 通过Session访问
    BaseAgent --> Reasoning: 跨阶段调用
    
    %% 样式设置
    classDef titleClass fill:#f9f9f9,stroke:#333,stroke-width:2px,font-weight:bold
    classDef agentClass fill:#e3f2fd,stroke:#1565c0,stroke-width:1px
    classDef componentClass fill:#e8f5e9,stroke:#2e7d32,stroke-width:1px
    classDef sessionClass fill:#fff9c4,stroke:#fbc02d,stroke-width:1px
    classDef metaClass fill:#d1c4e9,stroke:#673ab7,stroke-width:1px
    classDef memoryClass fill:#ffccbc,stroke:#e64a19,stroke-width:1px
    
    class title titleClass
    class AgentRunner,AgentExecutor,BaseAgent agentClass
    class Session sessionClass
    class AgentMeta metaClass
    class Perception,Cognition,Decision,Reasoning,Tool componentClass
    class Memory memoryClass
```